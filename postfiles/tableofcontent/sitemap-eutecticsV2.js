/* Author : Tushar Sharma
*  Add Table of Content in blogger (7 type provided)
*  Url: http://eutectics.blogspot.com/2014/12/add-table-of-content-or-sitemap-in-blogger-blog.html
*/
var tocConfig={url:"",feedNum:6,labelName:window.location.hash&&"#0"!=window.location.hash&&"#search"!=window.location.hash?encodeURIComponent(window.location.hash.substr(1)):!1,numChars:140,thumbWidth:70,navText:"Load More &#9660;",frontText:"Top &uArr;",noImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAA3NCSVQICAjb4U/gAAAADElEQVQImWOor68HAAL+AX7vOF2TAAAAAElFTkSuQmCC",loading:"<span>Loading...</span>",searching:"<span>Searching...</span>",MonthNames:"Jan Feb Mar Apr Mei Jun Jul Agu Sep Okt Nov Des".split(" "),
noResult:"No Result"};function getID(a){return document.getElementById(a)}var head=document.getElementsByTagName("head")[0],tocContainer=getID("feedContainer"),feedNav=getID("feedNav"),orderByer=getID("orderFeedBy"),labelSorter=getID("labelSorter"),input=getID("postSearcher").getElementsByTagName("input")[0],resultDesc=getID("resultDesc"),nextPage,feedArchive,startPage=0;
function cropFeed(a,d){for(var b=a.split("<"),f=0;f<b.length;f++)-1!=b[f].indexOf(">")&&(b[f]=b[f].substring(b[f].indexOf(">")+1,b[f].length));b=b.join(" ");return b=b.substring(0,d-1)}function showLabels(a){a=a.feed.category;for(var d="",d="<select id='labelSorter' onchange='changeSort(this.value);'><option value='' selected disabled>CATEGORY...</option>",b=0;b<a.length;b++)d+="<option value='"+decodeURIComponent(a[b].term)+"'>"+a[b].term.toUpperCase()+"</option>";labelSorter.innerHTML=d+"</select>"}
function showFeedList(a){var d=a.feed.entry,b,f,k,c,l,g,m,n,e="";if("undefined"!==typeof a.feed.entry){for(var h=0;h<tocConfig.feedNum;h++){b=d?d[h]:"";nextPage="";if(h==a.feed.entry.length)break;f=b.title.$t;for(c=0;c<b.link.length;c++)if("alternate"==b.link[c].rel){k=b.link[c].href;break}for(c=0;c<a.feed.link.length;c++)"next"==a.feed.link[c].rel&&(nextPage=a.feed.link[c].href);for(c=0;c<b.link.length;c++)if("replies"==b.link[c].rel&&"text/html"==b.link[c].type){n=b.link[c].title;break}l="content"in
b?b.content.$t:"summary"in b?b.summary.$t:"";c="media$thumbnail"in b?b.media$thumbnail.url.replace(/\/s[0-9]+\-c/,"/s"+tocConfig.thumbWidth+"-c"):tocConfig.noImage.replace(/\/s[0-9]+\-c/,"/s"+tocConfig.thumbWidth+"-c");postdate=b.published.$t.substring(0,10);b=postdate.substring(0,4);g=postdate.substring(5,7);m=postdate.substring(8,10);g=tocConfig.MonthNames[parseInt(g,10)-1];e+="<li><div class='inner'>";e+="<a href='"+k+"' target='_blank'><img style='width:"+tocConfig.thumbWidth+"px;height:"+tocConfig.thumbWidth+
"px;' src='"+c+"' alt='"+f+"' /></a>";e+="<a class='toc-title' href='"+k+"' target='_blank'>"+f+"</a><strong> - ("+n+")</strong><br>";e+="<div class='news-text'>"+cropFeed(l,tocConfig.numChars)+"&hellip;<br style='clear:both;'/></div>";e+='<div class="date"><span class="dd">'+m+'</span><span class="dm">'+g+'</span><span class="dy">'+b+"</span></div></div></li>"}resultDesc.innerHTML=""!==input.value&&"#search"==window.location.hash?"<span>Search result for keyword <strong>&quot;"+input.value+"&quot;</strong></span>":
"";feedContainer.innerHTML+=e;e=nextPage?window.location.hash&&"#0"!==window.location.hash?"<a href='javascript:initResult(2);' class='next'>"+tocConfig.navText+"</a>":"<a href='javascript:initResult(1);' class='next'>"+tocConfig.navText+"</a>":"<a href='#table-outer' onclick='jQuery(&apos;html, body&apos;).animate({scrollTop: jQuery(&apos;#table-outer&apos;).offset().top}, 1500); return false' class='front'>"+tocConfig.frontText+"</a>";feedNav.innerHTML=e;input.value="";labelSorter.getElementsByTagName("select")[0].removeAttribute("disabled");
orderByer.removeAttribute("disabled")}else feedContainer.innerHTML="",alert(tocConfig.noResult),feedNav.innerHTML="<a href='?reload=true'>"+tocConfig.frontText+"</a>",searchDesc.innerHTML=""}
function initResult(a){1==a?(a=nextPage.indexOf("?"),a=nextPage.substring(a)):2==a?(a=nextPage.indexOf("?"),a=nextPage.substring(a).replace(/\?/,"/-/"+window.location.hash.substr(1)+"?")):a="?start-index=1&max-results="+tocConfig.feedNum+"&orderby="+orderByer.value+"&alt=json-in-script";updateScript(a+"&callback=showFeedList")}function removeScript(){var a=getID("temporer-script");a.parentNode.removeChild(a)}
function buildLabels(){var a=document.createElement("script");a.type="text/javascript";a.src=(""===tocConfig.url?window.location.protocol+"//"+window.location.host:tocConfig.url)+"/feeds/posts/summary?max-results=0&alt=json-in-script&callback=showLabels";head.appendChild(a)}
function updateScript(a){1==startPage&&removeScript();feedNav.innerHTML=tocConfig.loading;feedArchive=!1!==tocConfig.labelName?(""===tocConfig.url?window.location.protocol+"//"+window.location.host:tocConfig.url)+"/feeds/posts/summary/-/"+tocConfig.labelName+a:(""===tocConfig.url?window.location.protocol+"//"+window.location.host:tocConfig.url)+"/feeds/posts/summary"+a;a=document.createElement("script");a.type="text/javascript";a.src=feedArchive;a.id="temporer-script";head.appendChild(a);startPage=
1}
function changeSort(a){removeScript();tocContainer.innerHTML="";feedNav.innerHTML=tocConfig.loading;var d=document.createElement("script"),b=labelSorter.getElementsByTagName("select")[0];d.type="text/javascript";d.id="temporer-script";d.src=(""===tocConfig.url?window.location.protocol+"//"+window.location.host:tocConfig.url)+"/feeds/posts/summary"+(0!==a?"/-/"+a:"")+"?alt=json-in-script&max-results="+tocConfig.feedNum+"&orderby="+orderByer.value+"&callback=showFeedList";head.appendChild(d);b.disabled=!0;
orderByer.disabled=!0;window.location.hash=a}
function searchPost(){removeScript();tocContainer.innerHTML="";resultDesc.innerHTML="";feedNav.innerHTML=tocConfig.searching;var a=document.createElement("script");a.type="text/javascript";a.id="temporer-script";a.src=(""===tocConfig.url?window.location.protocol+"//"+window.location.host:tocConfig.url)+"/feeds/posts/summary?alt=json-in-script&orderby=published&q="+input.value+"&max-results=9999&callback=showFeedList";head.appendChild(a);window.location.hash="#search";return!1}
getID("postSearcher").onsubmit=function(){return searchPost()};orderByer.onchange=function(){changeSort(0)};labelSorter.getElementsByTagName("select")[0].onchange=function(){changeSort(this.value)};window.onload=function(){initResult(0);buildLabels();window.location.hash="#0"};